{% extends "_layouts/system.twig" %}

{% block head %}
    <link href="/css/backend/events/create.css" rel="stylesheet" type="text/css">
    <script src="/js/backend/events/edit.js" type="text/javascript"></script>
{% endblock %}

{% block title %}Events{% endblock %}

{% block content %}
    <div id="banner-wrapper">
        {% include "backend/events/_partials/banner-image.twig" %}
    </div>

    <h1 style="background-color: {{ event.getTypePrimaryColor() }};">{{ event.getTypeName() }}</h1>

    <br>
    {% spaceless %}
    <div class="tab-group">
        <div class="tab-object tab-active" data-tabgroup="event" data-element="tab-page-details">Details</div>
        <div class="tab-object" data-tabgroup="event" data-element="tab-page-images">Images</div>
        <div class="tab-object" data-tabgroup="event" data-element="tab-page-dates">Dates &amp; Times</div>
    </div>
    {% endspaceless %}
    <br><br>

    <div class="tab-page tab-page-active" id="tab-page-details">
        {% include "backend/events/_events-form.twig" %}
    </div>

    <div class="tab-page" id="tab-page-images">
        <form id="banner-upload-form" class="upload-form" target="upload-iframe-banner" action="/system/events/{{ event.getId() }}/banner-upload" method="post" enctype="multipart/form-data" style="float:left;margin-right:15px;">
            <p style="font-size:0.8em;color:#333;">Banner Images will be resized to 1920x800.</p>
            <input type="file" name="file">
            <button type="submit" name="submit">Upload Banner</button>
            <iframe id="upload-iframe-banner" name="upload-iframe-banner" style="display:none;"></iframe>
            {% include "backend/_partials/spinner.twig" %}
        </form>

        <form id="image-upload-form" class="upload-form" method="post" enctype="multipart/form-data" style="float:left;">
            <p style="font-size:0.8em;color:#333;">You may select multiple files.</p>
            <input type="file" name="file[]" multiple>
            <button type="submit" name="submit">Upload Image</button>
        </form>

        <div style="clear:both;"></div>
        <br>

        {% for image in event.getImages() %}
            <div class="image-wrapper">
                <div class="image-controls">
                    {% if not image.getIsMain() %}
                        <a href="#">Set Main</a> |
                    {% endif %}
                    <a href="#">Delete</a>
                </div>
                <img src="{{ image.getThumbnailUrl() }}" style="width:240px;height:240px;">
            </div>
        {% endfor %}

    </div>

    <div class="tab-page" id="tab-page-dates">
        Dates &amp; Times
    </div>

{% endblock %}